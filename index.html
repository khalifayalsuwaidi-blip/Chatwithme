<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ultimate Chat</title>

<style>
body{
  background:black;
  color:white;
  font-family:Arial;
}

header{
  background:#111;
  padding:10px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
  color:red;
}

#rooms button{
  background:#222;
  color:white;
  border:1px solid red;
  padding:5px 10px;
  margin:5px;
  cursor:pointer;
}

#chat{
  height:300px;
  overflow:auto;
  border:1px solid red;
  padding:10px;
  margin-top:10px;
  background:#111;
}

input,button{
  padding:6px;
  margin:5px;
}

.creator{
  color:white;
  font-weight:bold;
}

.admin{
  color:red;
  font-weight:bold;
}

.system{
  color:gray;
}
</style>
</head>

<body>

<header>ğŸ”¥ Ultimate Global Chat ğŸ”¥</header>

<div id="rooms">
<button onclick="switchRoom('global')">ğŸŒ Global</button>
<button onclick="switchRoom('boys')">ğŸ”µ Boys</button>
<button onclick="switchRoom('girls')">ğŸ”´ Girls</button>
</div>

<input id="username" placeholder="Username">
<br>
<div id="chat"></div>
<br>
<input id="messageInput" placeholder="Type message">
<button onclick="sendMessage()">Send</button>

<script>

let rooms = {
  global:[],
  boys:[],
  girls:[]
};

let currentRoom="global";

let bannedUsers = JSON.parse(localStorage.getItem("bannedUsers")) || [];
let mutedUsers = JSON.parse(localStorage.getItem("mutedUsers")) || [];

let role="user";


// ğŸ” LINK ROLE CHECK
if(window.location.href.includes("@creator")){
  let pass=prompt("Creator Password?");
  if(pass==="creator2"){
    role="creator";
    alert("ğŸ‘‘ Creator Mode Activated");
  }
}
else if(window.location.href.includes("@admin")){
  let pass=prompt("Admin Password?");
  if(pass==="admin2"){
    role="admin";
    alert("âš¡ Admin Mode Activated");
  }
}


// ğŸš« BAD WORD FILTER
const badWords = ["fuck","shit","ass","bitch","fucker","motherfucker"];

function filterText(text){
  let clean=text;
  badWords.forEach(word=>{
    let regex=new RegExp(word,"gi");
    clean=clean.replace(regex,"****");
  });
  return clean;
}


// SWITCH ROOM
function switchRoom(room){
  currentRoom=room;
  render();
}


// SEND MESSAGE
function sendMessage(){
  let user=document.getElementById("username").value.trim();
  let msg=document.getElementById("messageInput").value.trim();
  if(!user || !msg) return;

  if(bannedUsers.includes(user)){
    alert("You are banned.");
    return;
  }

  if(mutedUsers.includes(user)){
    alert("You are muted.");
    return;
  }

  // COMMANDS
  if(msg.startsWith("/ban ") && role!=="user"){
    let target=msg.split(" ")[1];
    if(role==="admin" && target==="creator"){
      alert("Admins cannot ban creator.");
      return;
    }
    if(role==="creator"){
      bannedUsers.push(target);
      localStorage.setItem("bannedUsers",JSON.stringify(bannedUsers));
      alert(target+" banned.");
    }
    else if(role==="admin"){
      bannedUsers.push(target);
      localStorage.setItem("bannedUsers",JSON.stringify(bannedUsers));
      alert(target+" banned.");
    }
    return;
  }

  if(msg.startsWith("/mute ") && role!=="user"){
    let target=msg.split(" ")[1];
    if(role==="admin" && target==="creator"){
      alert("Admins cannot mute creator.");
      return;
    }
    mutedUsers.push(target);
    localStorage.setItem("mutedUsers",JSON.stringify(mutedUsers));
    alert(target+" muted.");
    return;
  }

  msg=filterText(msg);

  rooms[currentRoom].push({
    user:user,
    text:msg,
    role:role
  });

  document.getElementById("messageInput").value="";
  render();
}


// RENDER
function render(){
  let chat=document.getElementById("chat");
  chat.innerHTML="";

  rooms[currentRoom].forEach(m=>{
    let div=document.createElement("div");

    if(m.role==="creator"){
      div.className="creator";
      div.innerHTML="ğŸ‘‘ "+m.user+": "+m.text;
    }
    else if(m.role==="admin"){
      div.className="admin";
      div.innerHTML="âš¡ "+m.user+": "+m.text;
    }
    else{
      div.innerHTML=m.user+": "+m.text;
    }

    chat.appendChild(div);
  });

  chat.scrollTop=chat.scrollHeight;
}

</script>

</body>
</html>
